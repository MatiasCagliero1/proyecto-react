{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\milue\\\\OneDrive\\\\Documents\\\\FACULTAD\\\\PROGRAMACION III\\\\ProyectoFinal\\\\proyecto-react-1\\\\src\\\\components\\\\Posteo.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { auth, db } from \"../firebase/config\";\nimport firebase from \"firebase\";\n\nvar Post = function (_Component) {\n  _inherits(Post, _Component);\n\n  var _super = _createSuper(Post);\n\n  function Post(props) {\n    var _this;\n\n    _classCallCheck(this, Post);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      likes: 0,\n      myLike: false,\n      showModal: false,\n      comment: ''\n    };\n    return _this;\n  }\n\n  _createClass(Post, [{\n    key: \"likear\",\n    value: function likear() {\n      var _this2 = this;\n\n      db.collection('Posts').doc(this.props.postData.id).update({\n        likes: firebase.firestore.FieldValue.arrayUnion(auth.currentUser.email)\n      }).then(function () {\n        console.log('likeado...');\n\n        _this2.setState({\n          likes: _this2.props.postData.data.likes.length,\n          myLike: true\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"unlike\",\n    value: function unlike() {\n      var _this3 = this;\n\n      db.collection('Posts').doc(this.props.postData.id).update({\n        likes: firebase.firestore.FieldValue.arrayRemove(auth.currentUser.email)\n      }).then(function () {\n        console.log('quitando like...');\n\n        _this3.setState({\n          likes: _this3.props.postData.data.likes.length,\n          myLike: false\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"showModal\",\n    value: function showModal() {\n      this.setState({\n        showModal: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        showModal: false\n      });\n    }\n  }, {\n    key: \"publicarComentario\",\n    value: function publicarComentario() {\n      var _this4 = this;\n\n      var oneComment = {\n        author: auth.currentUser.email,\n        createdAt: Date.now(),\n        commentText: this.state.comment\n      };\n      db.collection('Posts').doc(this.props.postData.id).update({\n        comments: firebase.firestore.FieldValue.arrayUnion(oneComment)\n      }).then(function () {\n        console.log('Comentario guardado');\n\n        _this4.setState({\n          comment: ''\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      console.log(this.props.postData);\n      return React.createElement(View, {\n        style: styles.postContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }, this.props.postData.data.textoPost), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, this.props.postData.data.owner), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }, \"Likes: \", this.state.likes), this.state.myLike ? React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this5.unlike();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }\n      }, \"Quitar like\")) : React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this5.likear();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }\n      }, \"Me gusta\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this5.showModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 16\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 20\n        }\n      }, \"Ver comentarios\")), this.state.showModal ? React.createElement(Modal, {\n        style: styles.modalContainer,\n        animationType: \"fade\",\n        transparent: false,\n        visible: this.state.showModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this5.closeModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: styles.closeButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 29\n        }\n      }, \"X\")), this.props.postData.data.comments ? React.createElement(FlatList, {\n        data: this.props.postData.data.comments,\n        keyExtractor: function keyExtractor(post) {\n          return post.createdAt.toString();\n        },\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(Text, {\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 60\n            }\n          }, \" \", item.author, \": \", item.commentText);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 33\n        }\n      }) : React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 33\n        }\n      }), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 25\n        }\n      }, React.createElement(TextInput, {\n        keyboardType: \"defualt\",\n        placeholder: \"Escrib\\xED tu comentario\",\n        onChangeText: function onChangeText(text) {\n          _this5.setState({\n            comment: text\n          });\n        },\n        multiline: true,\n        value: this.state.comment,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 29\n        }\n      }), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this5.publicarComentario();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 33\n        }\n      }, \"Comentar\")))) : React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }\n      }));\n    }\n  }]);\n\n  return Post;\n}(Component);\n\nvar styles = StyleSheet.create({\n  postContainer: {\n    borderColor: '#ccc',\n    borderWidth: 1,\n    borderStyle: 'solid',\n    paddingHorizontal: 10,\n    paddingVertical: 5,\n    marginBottom: 15,\n    marginHorizontal: 10\n  },\n  modalContainer: {\n    width: '97%',\n    borderRadius: 4,\n    padding: 10,\n    alignSelf: 'center',\n    marginVertical: 10,\n    boxShadow: 'rgb(204 204 204) 0px 0px 12px 9px',\n    backgroundColor: '#fff'\n  },\n  closeButton: {\n    backgroundColor: '#dc3545',\n    color: '#fff',\n    padding: 5,\n    borderRadius: 4,\n    margin: 5,\n    alignSelf: 'flex-end'\n  }\n});\nexport default Post;","map":{"version":3,"sources":["C:/Users/milue/OneDrive/Documents/FACULTAD/PROGRAMACION III/ProyectoFinal/proyecto-react-1/src/components/Posteo.js"],"names":["React","Component","auth","db","firebase","Post","props","state","likes","myLike","showModal","comment","collection","doc","postData","id","update","firestore","FieldValue","arrayUnion","currentUser","email","then","console","log","setState","data","length","catch","e","arrayRemove","oneComment","author","createdAt","Date","now","commentText","comments","styles","postContainer","textoPost","owner","unlike","likear","modalContainer","closeModal","closeButton","post","toString","item","text","publicarComentario","StyleSheet","create","borderColor","borderWidth","borderStyle","paddingHorizontal","paddingVertical","marginBottom","marginHorizontal","width","borderRadius","padding","alignSelf","marginVertical","boxShadow","backgroundColor","color","margin"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {Text, View, TouchableOpacity, StyleSheet, Modal, TextInput, FlatList} from 'react-native';\r\nimport { auth, db } from \"../firebase/config\";\r\nimport firebase from \"firebase\";\r\n\r\nclass Post extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n           likes:0,\r\n           myLike:false,\r\n           showModal:false,\r\n           comment:''\r\n        }\r\n    }\r\n   // componentDidMount(){\r\n//    if(this.props.postData.data.likes){\r\n  //          this.setState({\r\n     //           likes:this.props.postData.data.likes.length,\r\n     //           myLike: this.props.postData.data.likes.includes(auth.currentUser.email),\r\n     //       })\r\n     //   }\r\n    //}\r\n\r\n    likear(){\r\n        //Agregar mi email a un array\r\n        db.collection('Posts').doc(this.props.postData.id).update({\r\n            likes: firebase.firestore.FieldValue.arrayUnion(auth.currentUser.email)\r\n        })\r\n        .then(()=>{\r\n            console.log('likeado...');\r\n            //Cambiar el estado de likes y de mylike.\r\n            this.setState({\r\n                likes:this.props.postData.data.likes.length,\r\n                myLike:true\r\n            })\r\n        })\r\n        .catch(e=>console.log(e));\r\n    \r\n    }\r\n    \r\n    unlike(){\r\n        //Quitar mi email a un array\r\n        db.collection('Posts').doc(this.props.postData.id).update({\r\n            likes: firebase.firestore.FieldValue.arrayRemove(auth.currentUser.email)\r\n        })\r\n        .then(()=>{\r\n            console.log('quitando like...');\r\n            //Cambiar el estado de likes y de mylike.\r\n            this.setState({\r\n                likes:this.props.postData.data.likes.length,\r\n                myLike:false\r\n            })\r\n        })\r\n        .catch(e=>console.log(e));\r\n    \r\n    }\r\n\r\n    showModal(){\r\n        //mostramos el modal\r\n        this.setState({\r\n            showModal: true,\r\n        })\r\n    }\r\n    // Función que cierra el modal\r\n    closeModal(){\r\n        //mostramos el modal\r\n        this.setState({\r\n            showModal: false,\r\n        })\r\n    }\r\n\r\n    publicarComentario(){\r\n        //Armar el comentario.\r\n        let oneComment = {\r\n            author: auth.currentUser.email,\r\n            createdAt: Date.now(),\r\n            commentText: this.state.comment\r\n        }\r\n        //Actualizar comentario en la base. Puntualmente en este documento.\r\n            //Saber cual es el post que queremos actualizar\r\n        db.collection('Posts').doc(this.props.postData.id).update({\r\n            comments: firebase.firestore.FieldValue.arrayUnion(oneComment)\r\n        })\r\n        .then(()=>{\r\n            //Cambiar un estado para limpiar el form \r\n            console.log('Comentario guardado');\r\n            this.setState({\r\n                comment: ''\r\n            })\r\n        })\r\n        .catch( e => console.log(e))\r\n\r\n        \r\n    }\r\n\r\n    render(){\r\n        console.log(this.props.postData);\r\n        return(\r\n            <View style={styles.postContainer}>\r\n                <Text>{this.props.postData.data.textoPost}</Text>\r\n                <Text>{this.props.postData.data.owner}</Text>\r\n                <Text>Likes: {this.state.likes}</Text> \r\n               {\r\n                   this.state.myLike ?\r\n                    <TouchableOpacity onPress={()=>this.unlike()}>\r\n                        <Text>Quitar like</Text>\r\n                    </TouchableOpacity>   :\r\n                    <TouchableOpacity onPress={()=>this.likear()}>\r\n                        <Text>Me gusta</Text>\r\n                    </TouchableOpacity>\r\n               }\r\n               {/* Botón para activar el modal */}\r\n               <TouchableOpacity onPress={()=>this.showModal()}>\r\n                   <Text>Ver comentarios</Text>\r\n               </TouchableOpacity>\r\n\r\n               {/* Modal */}\r\n               {\r\n                   this.state.showModal ?    \r\n                    <Modal style={styles.modalContainer}\r\n                            animationType='fade'\r\n                            transparent={false}\r\n                            visible = {this.state.showModal}>\r\n                            {/* Botón para cerrar el modal */}\r\n                        <TouchableOpacity onPress={()=>this.closeModal()}>\r\n                            <Text style={styles.closeButton}>X</Text>\r\n                        </TouchableOpacity>\r\n                        {/* Listar los comentarios ¿Qué componenete usamos? */}\r\n                        {\r\n                            this.props.postData.data.comments ?\r\n                                <FlatList \r\n                                    data={this.props.postData.data.comments}\r\n                                    keyExtractor={post => post.createdAt.toString()}\r\n                                    renderItem={({item})=> <Text> {item.author}: {item.commentText}</Text>}\r\n                                /> :\r\n                                <Text></Text>\r\n                        }\r\n                        {/* Form para nuevo comentario */}\r\n                        <View>\r\n                            <TextInput keyboardType='defualt'\r\n                                        placeholder='Escribí tu comentario'\r\n                                        onChangeText={(text)=>{this.setState({comment: text})}}\r\n                                        multiline\r\n                                        value={this.state.comment}\r\n                            />\r\n                            <TouchableOpacity onPress={()=>this.publicarComentario()}>\r\n                                <Text>Comentar</Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n\r\n                    </Modal> :\r\n                    <Text></Text>\r\n               }\r\n\r\n\r\n               \r\n            </View>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    postContainer:{\r\n        borderColor: '#ccc',\r\n        borderWidth: 1,\r\n        borderStyle:'solid',\r\n        paddingHorizontal:10,\r\n        paddingVertical:5,\r\n        marginBottom: 15,\r\n        marginHorizontal:10,\r\n    },\r\n    modalContainer:{\r\n     width: '97%',\r\n     borderRadius:4,\r\n     padding:10,\r\n     alignSelf: 'center',\r\n     marginVertical: 10,\r\n    boxShadow:'rgb(204 204 204) 0px 0px 12px 9px',\r\n    backgroundColor:'#fff',\r\n    },\r\n    closeButton:{\r\n        backgroundColor:'#dc3545',\r\n        color:'#fff',\r\n        padding:5,\r\n        borderRadius: 4,\r\n        margin:5,\r\n        alignSelf:'flex-end'\r\n    }\r\n})\r\n\r\nexport default Post"]},"metadata":{},"sourceType":"module"}